import{o as ae,m as le,h as ie,n as ne,r,i as re,p as oe,q as b,j as e,L as T,s as N,k as D,l as ce}from"./index-23bfd1f9.js";import{_ as xe,P as F,A as x,F as de,$ as me,a as pe,b as he,c as ue,d as fe}from"./index-3247ea0a.js";import{c as G}from"./createLucideIcon-abaf8de9.js";import{P as M}from"./play-2d2e6ca3.js";import{D as w,M as ge}from"./more-horizontal-a9bb089a.js";import{B as je}from"./button-82a4389f.js";const be=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ne=G("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]),Ce=()=>{const{playlistName:h}=ae(),{getAllMusicAndPlaylist:v,musicPlaylistData:s,playlistData:d,isMPLoading:y,setIsMPLoading:_}=le(),{userInfo:P}=ie(),{setIsPFetching:R}=ne(),[f,B]=r.useState(null),[i,H]=r.useState(null),[U,$]=r.useState(0),[q,z]=r.useState(!0),[W,k]=r.useState(!1),[J,C]=r.useState(!1),[K,A]=r.useState(""),Q=re(),{selectedAudio:a,playAudio:I,pauseAudio:V,isPause:m,currentIndex:p,setCurrentIndex:g,setData:X,currentMusicPlayed:t,setCurrentMusicPlayed:S,setSelectedPlayedPlaylist:Y,selectedPlayedPlaylist:j}=oe();r.useEffect(()=>{(a==null?void 0:a.musicName)===(t!==null)&&g(p)},[a,t,p,g]),r.useEffect(()=>{if(d&&d.length!==0){const l=d==null?void 0:d.find(o=>o.playlistName===h);l&&l.id!==f&&(v(l.id),B(l.id),H(l),_(!0),$(100),z(!1))}},[h,d,f,v,s,_]),r.useEffect(()=>{s!=null&&s.musics&&s.musics.length>0&&(p>=0&&p<s.musics.length?A(s.musics[p].musicName):A(s.musics[0].musicName))},[s,p]);const L=l=>{var o,u;if((a==null?void 0:a.musicName)===l)m?I(a):V(),S(a);else{const c=(o=s==null?void 0:s.musics)==null?void 0:o.find(E=>E.musicName===l);c&&(I(c),g((u=s==null?void 0:s.musics)==null?void 0:u.indexOf(c))),S(c)}X("playlist"),Y(i)},Z=async l=>{l.preventDefault(),k(!0),C(!1);try{return await fetch(`${ce}playlist/${f}`,{method:"DELETE"})}catch(o){console.error(o)}finally{R(!0),setTimeout(()=>{z(!0),$(80)},500),setTimeout(()=>{Q("/")},1500)}},ee=`${b+"playlist/img/"+(i==null?void 0:i.playlistImage)}`;return!h||!i?e.jsx(e.Fragment,{children:y?e.jsx(T,{className:"pt-12"}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[100%] p-6 gap-2",children:[e.jsx("h1",{className:"text-2xl text-center",children:"Playlist Not Found"}),e.jsx(N,{to:"/",className:"p-2 bg-black/50 rounded-md hover:bg-black transition-all hover:scale-105 duration-300 ",children:"Go Home"})]})}):e.jsx(e.Fragment,{children:q?e.jsx(D,{color:"#00a827",shadow:!0,progress:U}):e.jsx(xe,{src:ee,crossOrigin:"anonymous",format:"rgbString",children:({data:l,loading:o})=>{var u,c;if(o)return e.jsx(D,{color:"#00a827",shadow:!0,progress:100});{const se=l.replace("rgb","rgba").replace(")",`, ${.75})`),te=l.replace("rgb","rgba").replace(")",", 0)");return e.jsxs("div",{className:"mx-auto",style:{background:`linear-gradient(${se}, ${te})`},children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start pt-20 pb-4 px-6 space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:`${b+"playlist/img/"+(i==null?void 0:i.playlistImage)}`,alt:"cover",className:"object-cover min-w-[150px] rounded min-h-[150px] w-[250px] h-[250px] max-w-[250px] max-h-[250px]"})}),e.jsxs("div",{className:"flex flex-col items-start px-6 justify-end mt-4 sm:mt-auto mb-0 gap-2",children:[e.jsx("h4",{className:"font-semibold text-xs sm:text-sm text-zinc-200",children:"Playlist"}),e.jsx("h1",{className:"text-xl sm:text-7xl font-bold text-zinc-50",children:i.playlistName}),e.jsxs("h4",{className:"font-semibold text-xs sm:text-sm text-zinc-100 flex items-center justify-start",children:[P.username??""," ",e.jsx(Ne,{size:20})," ",((u=s==null?void 0:s.musics)==null?void 0:u.length)+" Songs"]})]})]}),e.jsxs("div",{className:"bg-black/20 flex flex-row items-center justify-start gap-2 p-4",children:[e.jsx("button",{title:"Play","aria-label":"Play",onClick:()=>L(K),className:"flex items-center justify-center p-4 rounded-full bg-green-500/90 text-black button-transition hover:scale-110 hover:bg-green-500 hover:shadow-md",children:(j==null?void 0:j.id)===(i==null?void 0:i.id)&&t&&a&&!m?e.jsx(F,{fill:"black"}):e.jsx(M,{fill:"black",className:"ml-1"})}),e.jsxs(w.Root,{children:[e.jsx(w.Trigger,{children:e.jsx(je,{variant:"none",color:"gray","aria-label":"option",title:"More Options",className:"flex items-center justify-center p-4 text-zinc-400 hover:text-white transition-all ease-in-out duration-300  ",children:e.jsx(ge,{size:35})})}),e.jsx(w.Content,{color:"gray",children:e.jsx("div",{children:e.jsxs(x.Root,{open:J,onOpenChange:C,children:[e.jsx(x.Trigger,{children:e.jsx("button",{color:"gray",className:"w-full p-2 hover:bg-gray-500/90 text-sm font-normal py-1.5 rounded","aria-label":"toggle",children:"Delete Playlist"})}),e.jsxs(x.Content,{style:{maxWidth:450},children:[e.jsxs(x.Title,{children:["Delete Playlist ",h," ?"]}),e.jsx(x.Description,{size:"2",children:"Are you sure?"}),e.jsxs(de,{gap:"3",mt:"4",justify:"end",children:[e.jsx(x.Cancel,{children:e.jsx("button",{className:"cursoir-pointer bg-gray-700 hover:bg-gray-700/90 text-sm text-zinc-100 flex items-center justify-center rounded-md px-2 py-2 outline-none focus:shadow-sm font-semibold",children:"Cancel"})}),e.jsx(x.Action,{children:e.jsx("button",{className:"cursoir-pointer bg-red-500 hover:bg-red-500/90 text-sm text-zinc-100 flex items-center justify-center rounded-md px-2 py-2 outline-none focus:shadow-sm font-semibold",onClick:Z,children:"Delete"})})]})]})]})})})]})]}),e.jsxs(me,{swipeDirection:"right",children:[e.jsxs(pe,{className:"bg-green-500 rounded-md shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,_hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px] p-[15px] grid [grid-template-areas:_'title_action'_'description_action'] grid-cols-[auto_max-content] gap-x-[15px] items-center data-[state=open]:animate-slideIn data-[state=closed]:animate-hide data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=cancel]:transition-[transform_200ms_ease-out] data-[swipe=end]:animate-swipeOut",open:W,onOpenChange:k,children:[e.jsxs(he,{className:"[grid-area:_title] mb-[5px] font-medium text-slate12 text-[15px]",children:["Success Delete ",h,"!"]}),e.jsx(ue,{className:"[grid-area:_action]",asChild:!0,altText:"Goto Playlist",children:e.jsx(N,{to:"/",className:"inline-flex items-center justify-center rounded font-medium text-xs px-[10px] leading-[25px] h-[25px] bg-green2 text-green11 shadow-[inset_0_0_0_1px] shadow-green7 hover:shadow-[inset_0_0_0_1px] hover:shadow-green8 focus:shadow-[0_0_0_2px] focus:shadow-green8",children:"Go"})})]}),e.jsx(fe,{className:"[--viewport-padding:_25px] fixed bottom-0 right-0 flex flex-col p-[var(--viewport-padding)] gap-[10px] w-[390px] max-w-[100vw] m-0 list-none z-[2147483647] outline-none"})]}),e.jsx("div",{className:"bg-black/20 sm:px-8 px-4",children:e.jsx("div",{className:"overflow-x-hidden",children:e.jsxs("div",{className:"max-w-screen-xl",children:[e.jsxs("div",{className:"flex flex-row px-4 border-b border-zinc-800 mb-4 gap-2",children:[e.jsx("div",{className:"w-8 lg:w-4",children:e.jsx("span",{className:"text-zinc-400 text-sm",children:"#"})}),e.jsx("div",{className:"w-72 lg:w-52 xl:w-96",children:e.jsx("span",{className:"text-zinc-400 text-sm",children:"Title"})}),e.jsx("div",{className:"w-72 hidden lg:block ml-auto",children:e.jsx("span",{className:"text-zinc-400 text-sm",children:"Artist"})}),e.jsx("div",{className:"w-12 ml-auto",children:e.jsx("span",{className:"text-zinc-400",children:e.jsx(be,{className:"w-5 h-5"})})})]}),e.jsx("div",{className:"flex flex-col items-center justify-between px-4 pb-4 border-b border-zinc-800 gap-2",children:y?e.jsx(T,{}):(c=s==null?void 0:s.musics)==null?void 0:c.map((n,O)=>e.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[e.jsxs("div",{className:"w-8 h-8 lg:w-4 lg:h-4 relative group",children:[e.jsx("span",{className:`w-full ${(t==null?void 0:t.musicName)===n.musicName&&a&&!m?"hidden":"flex"}  text-zinc-400 text-sm items-center justify-start h-full absolute top-0 left-0 opacity-100 group-hover:opacity-0 transition-opacity`,children:O+1}),e.jsxs("div",{className:`playing-playlist ${(t==null?void 0:t.musicName)===n.musicName&&a&&!m?"visible":"invisible"}`,children:[e.jsx("span",{className:"playing__bar playing__bar1"}),e.jsx("span",{className:"playing__bar playing__bar2"}),e.jsx("span",{className:"playing__bar playing__bar3"})]}),e.jsx("button",{onClick:()=>L(n.musicName),className:`absolute ${(t==null?void 0:t.musicName)===n.musicName&&a&&!m?"hidden":""} flex items-center justify-start top-0 left-0 w-full h-full opacity-0 group-hover:opacity-100 transition-opacity`,children:(t==null?void 0:t.musicName)===n.musicName&&a&&!m?e.jsx(F,{fill:"white",color:"white",size:15}):e.jsx(M,{fill:"white",color:"white",size:15})})]}),e.jsx("div",{className:"w-72 lg:w-52 xl:w-96",children:e.jsxs("figure",{className:"flex flex-row items-center gap-4",children:[e.jsx("img",{src:`${b+"img/"+n.musicImage}`,alt:"cover",className:"object-cover w-10 h-10 rounded-md"}),e.jsxs("figcaption",{className:"text-sm font-semibold text-zinc-200 w-24 xl:w-96 lg:whitespace-normal overflow-hidden overflow-ellipsis whitespace-nowrap",children:[e.jsx(N,{className:"hover:underline",to:`/music/${n.musicName}`,children:n.musicName}),e.jsx("span",{className:"block lg:hidden text-xs text-zinc-400 font-normal ",children:n.musicArtist})]})]})}),e.jsx("div",{className:"w-72 hidden lg:block ml-auto",children:e.jsx("span",{className:"text-zinc-400 text-sm",children:n.musicArtist})}),e.jsx("div",{className:"w-12 ml-auto",children:e.jsx("span",{className:"text-zinc-400 text-sm",children:n.duration})})]},O))})]})})})]})}}})})};export{Ce as default};
