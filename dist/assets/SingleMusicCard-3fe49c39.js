import{o as D,m as F,p as G,r as l,q as H,j as e,k as y,s as w,l as U}from"./index-23bfd1f9.js";import{_ as B,P as q,A as o,F as W,$ as Z,a as J,b as K,c as Q,d as V}from"./index-3247ea0a.js";import{P as v}from"./play-2d2e6ca3.js";import{c as X}from"./createLucideIcon-abaf8de9.js";import{D as s,M as Y}from"./more-horizontal-a9bb089a.js";import{P as ee}from"./plus-7e569380.js";import{L as se}from"./loader-2-7fafc170.js";import{U as te}from"./user-2-9d0d5a9e.js";import{B as ae}from"./button-82a4389f.js";const re=X("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),he=()=>{const{musicName:n}=D(),{musicData:c,playlistData:d,isPLoading:$}=F(),{selectedAudio:a,isPause:h,pauseAudio:S,playAudio:f,currentIndex:g,setCurrentIndex:m,setData:A}=G(),[C,j]=l.useState(!1),[b,P]=l.useState("Liked Songs"),[N,k]=l.useState(0),[z,I]=l.useState(!0),t=c==null?void 0:c.find(r=>r.musicName===n),_=`${H+"img/"+(t==null?void 0:t.musicImage)}`;l.useEffect(()=>{(a==null?void 0:a.musicName)===n&&m(g)},[a,n,g,m]),l.useEffect(()=>{t&&(k(100),I(!1))},[t]);const L=(a==null?void 0:a.musicName)===n,T=()=>{(a==null?void 0:a.musicName)===n?h?f(a):S():(f({...t}),A("default"),m(c.findIndex(r=>r.musicName===n)))},O=async r=>{j(!0);const p=r.currentTarget.dataset.musicId,x=r.currentTarget.dataset.playlistId;P(r.currentTarget.dataset.playlistName);try{return await fetch(`${U}playlist/addmusic/${p}/${x}`,{method:"POST"})}catch(u){console.error(u)}};return e.jsx(e.Fragment,{children:z?e.jsx(y,{color:"#00a827",shadow:!0,progress:N}):e.jsx(B,{src:`${_}`,crossOrigin:"",format:"rgbString",children:({data:r,loading:p,error:x})=>{if(p)return e.jsx(y,{color:"#00a827",shadow:!0,progress:N});if(x)return console.log(x),e.jsx("h1",{children:"ERROR"});{const R=r.replace("rgb","rgba").replace(")",`, ${.75})`),E=r.replace("rgb","rgba").replace(")",", 0)");return e.jsxs("div",{className:"mx-auto",style:{background:`linear-gradient(${R}, ${E})`},children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start pt-20 pb-4 px-6 space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:`${_}`,alt:"cover",className:"object-cover min-w-[150px] rounded min-h-[150px] w-[250px] h-[250px] max-w-[250px] max-h-[250px]"})}),e.jsxs("div",{className:"flex flex-col items-start px-6 justify-end mt-4 sm:mt-auto mb-0 gap-2",children:[e.jsx("h4",{className:"font-semibold text-xs sm:text-sm text-zinc-200",children:"Song"}),e.jsx("h1",{className:"text-xl lg:text-7xl font-bold text-zinc-50",children:t.musicName}),e.jsx("h4",{className:"font-normal text-xs sm:text-sm text-zinc-100",children:t.musicArtist})]})]}),e.jsxs("div",{className:"bg-black/20 flex flex-row items-center justify-start gap-2 p-4",children:[e.jsx("button",{title:"Play","aria-label":"Play",onClick:T,className:`flex items-center justify-center p-4 rounded-full bg-green-500/90 text-black button-transition hover:scale-110 hover:bg-green-500 hover:shadow-md
          `,children:L?h?e.jsx(v,{fill:"black",className:"ml-1"}):e.jsx(q,{fill:"black"}):e.jsx(v,{fill:"black",className:"ml-1"})}),e.jsx("button",{"aria-label":"love",title:"Add to Liked Songs",className:"flex items-center justify-center p-4 text-zinc-400 hover:text-white transition-all ease-in-out duration-300  ",children:e.jsx(re,{size:35})}),e.jsxs(s.Root,{children:[e.jsx(s.Trigger,{children:e.jsx(ae,{variant:"none",color:"gray","aria-label":"option",title:"More Options",className:"flex items-center justify-center p-4 text-zinc-400 hover:text-white transition-all ease-in-out duration-300  ",children:e.jsx(Y,{size:35})})}),e.jsxs(s.Content,{color:"gray",children:[e.jsx(s.Item,{children:"Add to Liked Songs"}),e.jsx(s.Separator,{}),e.jsxs(s.Sub,{children:[e.jsx(s.SubTrigger,{children:"Add to Playlist"}),e.jsxs(s.SubContent,{children:[e.jsx(w,{to:"/create/playlist",children:e.jsxs(s.Item,{className:"gap-2 justify-start",children:[e.jsx(ee,{size:15})," Create a Playlist"]})}),e.jsx(s.Separator,{}),$?e.jsx(se,{className:"w-4 h-4 animate-spin"}):(d==null?void 0:d.length)===0?e.jsx(s.Item,{children:"No Playlist Found"}):d.map((i,M)=>e.jsx("div",{className:"mt-1",children:e.jsxs(o.Root,{children:[e.jsx(o.Trigger,{children:e.jsx("button",{color:"gray",className:"w-full hover:bg-gray-500/90 text-sm font-normal py-1.5 rounded","aria-label":"toggle",children:i.playlistName})}),e.jsxs(o.Content,{style:{maxWidth:450},children:[e.jsxs(o.Title,{children:["Add Songs to ",i.playlistName," ?"]}),e.jsx(o.Description,{size:"2",children:"Are you sure?"}),e.jsxs(W,{gap:"3",mt:"4",justify:"end",children:[e.jsx(o.Cancel,{children:e.jsx("button",{className:"cursoir-pointer bg-gray-700 hover:bg-gray-700/90 text-sm text-zinc-100 flex items-center justify-center rounded-md px-2 py-2 outline-none focus:shadow-sm font-semibold",children:"Cancel"})}),e.jsx(o.Action,{children:e.jsx("button",{className:"cursoir-pointer bg-green-500 hover:bg-green-500/90 text-sm text-zinc-100 flex items-center justify-center rounded-md px-2 py-2 outline-none focus:shadow-sm font-semibold","data-music-id":t==null?void 0:t.id,"data-playlist-id":i==null?void 0:i.id,"data-playlist-name":i==null?void 0:i.playlistName,onClick:O,children:"Add Songs"})})]})]})]})},M))]})]}),e.jsx(s.Separator,{}),e.jsx(s.Item,{children:"Share"}),e.jsx(s.Item,{children:"Add to favorites"}),e.jsx(s.Separator,{})]})]})]}),e.jsxs(Z,{swipeDirection:"right",children:[e.jsxs(J,{className:"bg-green-500 rounded-md shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,_hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px] p-[15px] grid [grid-template-areas:_'title_action'_'description_action'] grid-cols-[auto_max-content] gap-x-[15px] items-center data-[state=open]:animate-slideIn data-[state=closed]:animate-hide data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=cancel]:transition-[transform_200ms_ease-out] data-[swipe=end]:animate-swipeOut",open:C,onOpenChange:j,children:[e.jsxs(K,{className:"[grid-area:_title] mb-[5px] font-medium text-slate12 text-[15px]",children:["Added ",t.musicName," To ",b,"!"]}),e.jsx(Q,{className:"[grid-area:_action]",asChild:!0,altText:"Goto Playlist",children:e.jsx(w,{to:`/playlist/${b}`,className:"inline-flex items-center justify-center rounded font-medium text-xs px-[10px] leading-[25px] h-[25px] bg-green2 text-green11 shadow-[inset_0_0_0_1px] shadow-green7 hover:shadow-[inset_0_0_0_1px] hover:shadow-green8 focus:shadow-[0_0_0_2px] focus:shadow-green8",children:"Go"})})]}),e.jsx(V,{className:"[--viewport-padding:_25px] fixed bottom-0 right-0 flex flex-col p-[var(--viewport-padding)] gap-[10px] w-[390px] max-w-[100vw] m-0 list-none z-[2147483647] outline-none"})]}),e.jsxs("div",{className:"px-6 pt-3.5 pb-6 md:pb-12 lg:pb-20 xl:pb-36 flex flex-row items-center justify-start cursor-pointer bg-black/20 transition-all ease-in-out duration-300",children:[e.jsx("div",{className:"relative w-[80px] h-[80px]",children:e.jsx(te,{alt:"profile",className:"object-cover rounded-full p-1 w-full h-full bg-zinc-900"})}),e.jsxs("div",{className:"flex flex-col items-start justify-start p-4 gap-1",children:[e.jsx("h6",{className:"font-semibold text-sm",children:"Artist"}),e.jsx("h4",{className:"font-bold text-base hover:underline",children:t.musicArtist})]})]})]})}}})})};export{he as default};
