import{h as F,m as T,r as a,l as w,j as e,q as x,L as q}from"./index-23bfd1f9.js";import{D as m,M as O,j as H,b as X,c as G,e as V,g as Z,h as J,i as K}from"./more-horizontal-a9bb089a.js";import Q from"./MusicCard-82f41ef3.js";import W from"./MainPlaylist-f749a9b5.js";import{c as d}from"./createLucideIcon-abaf8de9.js";import{U as y}from"./user-2-9d0d5a9e.js";import{L as Y}from"./loader-2-7fafc170.js";import{B as ee}from"./button-82a4389f.js";import"./play-2d2e6ca3.js";const N=d("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),se=d("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),te=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),de=()=>{const{userInfo:t,setUpdateUser:v,token:r}=F(),{playlistData:n}=T(),[$,_]=a.useState(null),[f,p]=a.useState(""),[o,C]=a.useState(null),[k,c]=a.useState(!1),[I,u]=a.useState(!1),[h,S]=a.useState([]),[z,M]=a.useState(!0),[g,P]=a.useState(!1),[j,U]=a.useState(!1),L=a.useRef(),b=a.useCallback(async()=>{try{const l=await(await fetch(`${w}mostmusics`,{method:"GET",headers:{Authorization:`Bearer ${r}`}})).json();S(l.musics)}catch(s){console.error(s)}finally{M(!1)}},[r]);a.useEffect(()=>{r&&b()},[b,r]),a.useEffect(()=>{t.username&&p(t.username)},[t.username]);const D=async s=>{s.preventDefault(),u(!0);try{const l=new FormData;if(l.append("username",g?f:""),l.append("profile_image",j?$:""),g||j)return await fetch(`${w}user`,{method:"PUT",headers:{Authorization:`Bearer ${r}`},body:l});console.log("No changes to update.")}catch(l){console.error(l)}finally{v(!0),u(!1),c(!1)}},E=s=>{const l=s.target.files[0];if(_(l),l){const i=new FileReader;i.onload=B=>{C(B.target.result)},i.readAsDataURL(l),U(!0)}},A=s=>{p(s.target.value),P(!0)},R=()=>{document.getElementById("file-input").click()};return e.jsxs("div",{className:"mx-auto pt-12",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-center pt-10 pb-4 px-6 cursor-pointer bg-black/5 space-y-4",onClick:()=>c(!0),children:[e.jsxs("div",{className:"relative w-40 h-40",children:[e.jsx("div",{className:"absolute top-0 left-0 cursor-default w-full h-full opacity-0 rounded-full transition-opacity duration-300 bg-black bg-opacity-50 flex items-center justify-center text-white hover:opacity-100",children:e.jsxs("span",{className:"flex flex-col items-center justify-center",children:["Choose Photo",e.jsx(N,{className:"w-8 h-8"})]})}),t.profile&&t.profile!==null&&t.profile!==void 0&&t.profile!==""?e.jsx("img",{src:`${x}img/profile/${t.profile}`,alt:"profile",className:"object-cover rounded-full w-40 h-40 max-w-[160px] max-h-[160px]"}):e.jsx(y,{alt:"profile",className:"object-cover rounded-full w-full h-full bg-zinc-800 p-0.5"})]}),e.jsxs("div",{className:"flex flex-col items-center lg:items-start px-6 justify-end mt-4 sm:mt-auto mb-0 lg:gap-2 gap-4 w-full",children:[e.jsx("h4",{className:"font-semibold text-xs sm:text-sm text-zinc-200",children:"Profile"}),e.jsx("h1",{className:"text-xl lg:text-7xl font-bold text-zinc-50 lg:mb-6",children:t.username??""}),e.jsx("h4",{className:"font-semibold text-xs sm:text-sm text-zinc-100 flex items-center justify-start",children:(n==null?void 0:n.length)+" Playlists"})]})]}),e.jsx("div",{className:"bg-black/5 px-2 sm:px-8 py-4",children:e.jsxs(m.Root,{children:[e.jsx(m.Trigger,{children:e.jsx(ee,{variant:"none",color:"gray","aria-label":"option",title:"More Options",className:"flex items-center justify-center p-4 text-zinc-400 hover:text-white transition-all ease-in-out duration-300  ",children:e.jsx(O,{size:30})})}),e.jsx(m.Content,{color:"gray",children:e.jsxs("button",{color:"gray",className:"w-full flex p-2 hover:bg-gray-500/90 text-sm font-normal py-1.5 rounded","aria-label":"toggle",onClick:()=>c(!0),children:[e.jsx(se,{className:"m-auto w-3 h-3 mr-2"})," Edit Profile"]})})]})}),e.jsxs("div",{className:"flex flex-col px-2 sm:px-8 py-4 gap-4 space-y-4 h-full",children:[e.jsxs("section",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Top played musics"}),e.jsx("div",{className:"flex flex-col flex-wrap sm:flex-row items-center justify-start gap-4",children:z?e.jsx(q,{}):h.length!==0&&h.map(s=>e.jsx("div",{children:e.jsx(Q,{musicName:s.musicName,musicArtist:s.musicArtist,musicImage:s.musicImage,musicPath:s.musicPath})},s.id))})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Public Playlists"}),e.jsx("div",{className:"flex flex-col flex-wrap sm:flex-row items-center justify-start gap-4",children:n.length!==0&&n.map(s=>e.jsx(W,{name:s.playlistName,image:s.playlistImage},s.id))})]})]}),e.jsx(e.Fragment,{children:e.jsx(H,{open:k,onOpenChange:c,children:e.jsxs(X,{children:[e.jsx(G,{className:"bg-black/20 data-[state=open]:animate-overlayShow fixed inset-0"}),e.jsxs(V,{className:"data-[state=open]:animate-contentShow fixed top-[50%] left-[50%] max-h-[85vh] w-[90vw] max-w-[450px] translate-x-[-50%] translate-y-[-50%] rounded-[6px] bg-zinc-800 p-[25px] shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,_hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px] focus:outline-none",children:[e.jsx(Z,{className:"text-white m-0 text-[17px] font-medium",children:"Edit profile"}),e.jsxs("form",{onSubmit:D,className:"flex flex-col items-center mt-5",children:[e.jsxs("div",{className:"flex flex-row items-center gap-4 w-full",children:[e.jsxs("fieldset",{className:"mb-[15px] flex items-center gap-5",children:[e.jsxs("div",{className:"relative w-24 h-24 sm:w-36 sm:h-36",children:[e.jsx("div",{onClick:R,className:"absolute top-0 left-0 cursor-pointer w-full h-full opacity-0 rounded-full transition-opacity duration-300 bg-black bg-opacity-50 flex items-center justify-center text-white hover:opacity-100",children:e.jsxs("span",{className:"flex flex-col items-center justify-center text-xs sm:text-base",children:["Choose Photo",e.jsx(N,{className:"sm:w-8 sm:h-8 w-6 h-6"})]})}),t.profile&&t.profile!==null&&t.profile!==void 0&&t.profile!==""?e.jsx("img",{src:o!==null?o:`${x}img/profile/${t.profile}`,alt:"profile",className:"object-cover w-24 h-24 sm:w-36 sm:h-36 rounded-full max-w-[144px] max-h-[144px]"}):o?e.jsx("img",{src:o!==null?o:`${x}img/profile/${t.profile}`,alt:"profile",className:"object-cover w-full h-full rounded-full"}):e.jsx(y,{alt:"profile",className:"object-cover rounded-full w-full h-full bg-zinc-800 p-0.5"})]}),e.jsx("input",{type:"file",id:"file-input",className:"hidden",ref:L,accept:".jpeg, .jpg, .png, .svg",onChange:E})]}),e.jsxs("fieldset",{className:"mb-[15px] w-full h-[70px] flex flex-col ml-auto items-start gap-1",children:[e.jsx("label",{className:"text-white w-[90px] text-center text-sm sm:text-[15px]",htmlFor:"username",children:"Username"}),e.jsx("input",{className:"text-white inline-flex h-[35px] w-full flex-1 items-center justify-center rounded-[4px] px-[10px] text-sm sm:text-[15px] leading-none shadow-[0_0_0_1px] outline-none focus:shadow-[0_0_0_2px]",id:"username",value:f,maxLength:10,onChange:A})]})]}),e.jsxs("div",{className:"mt-[20px] flex justify-end",children:[e.jsx(J,{className:"text-white my-1 text-xs sm:text-[15px] leading-normal",children:"Make changes to your profile here. Click save when you're done."}),e.jsx("button",{type:"submit",className:"bg-green-500 text-black hover:bg-green-500/75 focus:shadow-green-500 inline-flex h-[35px] items-center justify-center rounded-[4px] px-[15px] font-bold leading-none focus:shadow-[0_0_0_2px] focus:outline-none",children:I?e.jsx(Y,{className:"w-4 h-4 animate-spin"}):"Save"})]})]}),e.jsx(K,{asChild:!0,children:e.jsx("button",{className:"text-zinc-300 hover:bg-zinc-300/10 absolute top-[10px] right-[10px] inline-flex h-[25px] w-[25px] appearance-none items-center justify-center rounded-full focus:shadow-[0_0_0_2px] focus:outline-none","aria-label":"Close",children:e.jsx(te,{className:"w-4 h-4"})})})]})]})})})]})};export{de as default};
